## API Report File for "@devtools/plugin-catalog-backend-module-incremental-ingestion"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
/// <reference types="express" />

import { BackendFeature } from '@devtools/backend-plugin-api';
import { CatalogBuilder } from '@devtools/plugin-catalog-backend';
import { DatabaseService } from '@devtools/backend-plugin-api';
import type { DeferredEntity } from '@devtools/plugin-catalog-node';
import { EventParams } from '@devtools/plugin-events-node';
import { EventSubscriber } from '@devtools/plugin-events-node';
import { ExtensionPoint } from '@devtools/backend-plugin-api';
import { HumanDuration } from '@devtools/types';
import { IncrementalEntityProvider as IncrementalEntityProvider_2 } from '@devtools/plugin-catalog-backend-module-incremental-ingestion';
import { IncrementalEntityProviderOptions as IncrementalEntityProviderOptions_2 } from '@devtools/plugin-catalog-backend-module-incremental-ingestion';
import { PermissionsService } from '@devtools/backend-plugin-api';
import { RootConfigService } from '@devtools/backend-plugin-api';
import { RootLoggerService } from '@devtools/backend-plugin-api';
import { Router } from 'express';
import { SchedulerService } from '@devtools/backend-plugin-api';
import { UrlReaderService } from '@devtools/backend-plugin-api';

// @public
const catalogModuleIncrementalIngestionEntityProvider: BackendFeature;
export default catalogModuleIncrementalIngestionEntityProvider;

// @public
export type EntityIteratorResult<T> =
  | {
      done: false;
      entities: DeferredEntity[];
      cursor: T;
    }
  | {
      done: true;
      entities?: DeferredEntity[];
      cursor?: T;
    };

// @public @deprecated (undocumented)
export class IncrementalCatalogBuilder {
  // (undocumented)
  addIncrementalEntityProvider<TCursor, TContext>(
    provider: IncrementalEntityProvider<TCursor, TContext>,
    options: IncrementalEntityProviderOptions,
  ): EventSubscriber;
  // (undocumented)
  build(): Promise<{
    incrementalAdminRouter: Router;
  }>;
  static create(
    env: PluginEnvironment,
    builder: CatalogBuilder,
  ): Promise<IncrementalCatalogBuilder>;
}

// @public
export type IncrementalEntityEventResult =
  | {
      type: 'ignored';
    }
  | {
      type: 'delta';
      added: DeferredEntity[];
      removed: {
        entityRef: string;
      }[];
    };

// @public
export interface IncrementalEntityProvider<TCursor, TContext> {
  around(burst: (context: TContext) => Promise<void>): Promise<void>;
  eventHandler?: {
    onEvent: (params: EventParams) => Promise<IncrementalEntityEventResult>;
    supportsEventTopics: () => string[];
  };
  getProviderName(): string;
  next(
    context: TContext,
    cursor?: TCursor,
  ): Promise<EntityIteratorResult<TCursor>>;
}

// @public (undocumented)
export interface IncrementalEntityProviderOptions {
  backoff?: HumanDuration[];
  burstInterval: HumanDuration;
  burstLength: HumanDuration;
  rejectEmptySourceCollections?: boolean;
  rejectRemovalsAbovePercentage?: number;
  restLength: HumanDuration;
}

// @public
export interface IncrementalIngestionProviderExtensionPoint {
  addProvider<TCursor, TContext>(config: {
    options: IncrementalEntityProviderOptions_2;
    provider: IncrementalEntityProvider_2<TCursor, TContext>;
  }): void;
}

// @public
export const incrementalIngestionProvidersExtensionPoint: ExtensionPoint<IncrementalIngestionProviderExtensionPoint>;

// @public (undocumented)
export type PluginEnvironment = {
  logger: RootLoggerService;
  database: DatabaseService;
  scheduler: SchedulerService;
  config: RootConfigService;
  reader: UrlReaderService;
  permissions: PermissionsService;
};
```
